<!DOCTYPE html>
<html>
	<head>
		<title>Frecuify</title>

		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
		
		<link rel="stylesheet" type="text/css" href="styles/style.css">

		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script>
			var notas=['C', 'C#', 'D', 'D#', 'E',
			           'F', 'F#', 'G', 'G#',
			           'A', 'A#', 'B'];

			function imprimeFreq()
			{
			  var nota=Number($("#nota").val());
			  var octava=Number($("#octava").val());
			  $("#freq").html(freq(nota,octava).toFixed(3));
			  $("#nombrenota").html(notas[nota-1]);

			}

			function freq(nota, octava) {
			  return 440.0*Math.exp(
			    (
			      (octava-4)+
			      (nota-10)/12.0
			    )
			    *Math.log(2.0)
			  );
			}

			var context=new AudioContext();


			function bip(f) {
			var oscillator;
			oscillator=context.createOscillator();
			oscillator.frequency.value = f;

			oscillator.connect(context.destination);

			oscillator.start(0);
			  
			window.setTimeout(function(){oscillator.stop()}, 300);
			}

			function suena(){
			  
			  var frecuencia=Number($("#freq").html());
			  bip(frecuencia);
			}

			$(function(){
			        $("#octava").change(imprimeFreq);
			        $("#nota").change(imprimeFreq);
			        $("#suena").click(suena);
			    });
			</script>
	</head>
	<body>
		<div id="logo" style="background-image: url(logo.png);"> </div>
		
		<form action="#" id="all" class="lead">
			<p>Octave: </p>
			<input id="octava" type="number" min="0" max="10" value="4" required="" pattern="[0-9]*" novalidate">
			<br>
			<p>Note: </p>
			<input id="nota" type="number" min="1" max="12" value="10" required=""> 
			<p> (</p>
			<span id="nombrenota">B</span>
			<p> )</p>
			<div>
			 	<p>Frecuency:</p> 
			 	<span id="freq">31608.531</span>
			 	<p id="hz">Hz </p> 
				<br>
			</div>
		</form>
	</body>
</html>